#:schema node_modules/@decocms/runtime/config-schema.json
name = "durable-mcps-toolkit"
main = "server/main.ts"
compatibility_date = "2025-06-17"
compatibility_flags = [ "nodejs_compat" ]
scope = "oimoi"

[assets]
directory = "./dist/client"
binding = "ASSETS"
not_found_handling = "single-page-application"
run_worker_first = true

[deco]
workspace = "oimoi"
enable_workflows = false
local = false

[[deco.bindings]]
name = "INTEGRATIONS"
type = "mcp"
integration_name = "@deco/integrations"

[[deco.bindings]]
name = "DATABASE"
type = "mcp"
integration_name = "@deco/database"

[[deco.bindings]]
name = "OPENROUTER"
type = "mcp"
integration_name = "@deco/openrouter"

# QStash Configuration (secrets set via wrangler secret)
# Run: wrangler secret put QSTASH_TOKEN
# Run: wrangler secret put QSTASH_CURRENT_SIGNING_KEY
# Run: wrangler secret put QSTASH_NEXT_SIGNING_KEY

# Legacy Cloudflare Queues (commented out, replaced by QStash)
# [[queues.producers]]
# binding = "WORKFLOW_QUEUE"
# queue = "queue"
#
# [[queues.consumers]]
# queue = "queue"
# max_batch_size = 1
# max_batch_timeout = 1

[env.dev.triggers]
crons = ["* * * * *"]