// This file is auto-generated by @hey-api/openapi-ts

import type { Client, Options as Options2, TDataShape } from './client';
import { client } from './client.gen';
import type { GetAntifraudStatusData, GetAntifraudStatusResponses, GetCredentialsData, GetCredentialsResponses, ManifestData, ManifestResponses, RedirectData, RedirectResponses, RetrieveTokenData, RetrieveTokenResponses, ReturntoVtexData, ReturntoVtexResponses, SendAntifraudDataData, SendAntifraudDataResponses, SendAntifraudPreAnalysisDataData, SendAntifraudPreAnalysisDataResponses, StopAntifraudAnalysisOptionalData, StopAntifraudAnalysisOptionalResponses, UpdateAntifraudTransactionsOptionalData, UpdateAntifraudTransactionsOptionalResponses } from './types.gen';

export type Options<TData extends TDataShape = TDataShape, ThrowOnError extends boolean = boolean> = Options2<TData, ThrowOnError> & {
    /**
     * You can provide a client instance returned by `createClient()` instead of
     * individual options. This might be also useful if you want to implement a
     * custom client.
     */
    client?: Client;
    /**
     * You can pass arbitrary values through the `meta` object. This can be
     * used to access values that aren't defined as part of the SDK function.
     */
    meta?: Record<string, unknown>;
};

/**
 * Send anti-fraud pre-analysis data (optional)
 *
 * Receives a new transaction anti-fraud data for (synchronous) pre-analysis. This step is performed before payments authorization.
 *
 * >⚠️ This endpoint can only be used if your anti-fraud provider already has the pre-analysis function configured within VTEX. To check if it is already configured, in the VTEX Admin, go to **Store Settings > Payment > Providers**, click the name of your anti-fraud provider, and verify if the **Enable Risk Pre-Analysis** field is available to be selected. If the **Enable Risk Pre-Analysis** field is not available, check with your anti-fraud provider if this feature is available in their integration and open a ticket in our [VTEX Support](https://help.vtex.com/en/support) to update the connector.
 *
 * >⚠️ The pre-analysis does not exclude the need for full analysis after payments authorization.
 *
 * ## Permissions
 *
 * This endpoint does not require [permissions](https://help.vtex.com/en/tutorial/license-manager-resources--3q6ztrC8YynQf6rdc6euk3).
 */
export const sendAntifraudPreAnalysisData = <ThrowOnError extends boolean = false>(options: Options<SendAntifraudPreAnalysisDataData, ThrowOnError>) => (options.client ?? client).post<SendAntifraudPreAnalysisDataResponses, unknown, ThrowOnError>({
    security: [{ name: 'VtexIdclientAutCookie', type: 'apiKey' }],
    url: '/pre-analysis',
    ...options
});

/**
 * Send anti-fraud data
 *
 * Receives a new transaction anti-fraud data. This step is performed only if all payments are authorized.
 *
 * VTEX expects that your anti-fraud provider process this request and retrieves the process result. After that, the VTEX order flow will check the response status to cancel or approve the transaction.
 *
 *
 * > Only data from the main account is sent from VTEX to the anti-fraud system. Information related to subaccounts is not included in the request.
 *
 * ## Permissions
 *
 * This endpoint does not require [permissions](https://help.vtex.com/en/tutorial/license-manager-resources--3q6ztrC8YynQf6rdc6euk3).
 */
export const sendAntifraudData = <ThrowOnError extends boolean = false>(options: Options<SendAntifraudDataData, ThrowOnError>) => (options.client ?? client).post<SendAntifraudDataResponses, unknown, ThrowOnError>({
    security: [{ name: 'VtexIdclientAutCookie', type: 'apiKey' }],
    url: '/transactions',
    ...options
});

/**
 * Update anti-fraud transactions (optional)
 *
 * Receives a new transaction anti-fraud data. This step is performed only if all payments are authorized.
 *
 * VTEX expects that your anti-fraud provider process this request and retrieves the process result. After that, the VTEX order flow will check the response status to cancel or approve the transaction.
 *
 * ## Permissions
 *
 * This endpoint does not require [permissions](https://help.vtex.com/en/tutorial/license-manager-resources--3q6ztrC8YynQf6rdc6euk3).
 */
export const updateAntifraudTransactionsOptional = <ThrowOnError extends boolean = false>(options: Options<UpdateAntifraudTransactionsOptionalData, ThrowOnError>) => (options.client ?? client).put<UpdateAntifraudTransactionsOptionalResponses, unknown, ThrowOnError>({
    security: [{ name: 'VtexIdclientAutCookie', type: 'apiKey' }],
    url: '/transactions/{transactionId}',
    ...options
});

/**
 * List anti-fraud provider manifest
 *
 * Returns the custom fields of the anti-fraud provider manifest.
 *
 * ## Permissions
 *
 * This endpoint does not require [authentication](https://developers.vtex.com/docs/guides/authentication) or [permissions](https://help.vtex.com/en/tutorial/license-manager-resources--3q6ztrC8YynQf6rdc6euk3).
 */
export const manifest = <ThrowOnError extends boolean = false>(options: Options<ManifestData, ThrowOnError>) => (options.client ?? client).get<ManifestResponses, unknown, ThrowOnError>({ url: '/manifest', ...options });

/**
 * Get anti-fraud status
 *
 * Retrieves the anti-fraud analysis status. This request is performed every two hours up to 5 days. After 5 days in `undefined` status, the order will expire and be cancelled.
 *
 * ## Permissions
 *
 * This endpoint does not require [permissions](https://help.vtex.com/en/tutorial/license-manager-resources--3q6ztrC8YynQf6rdc6euk3).
 */
export const getAntifraudStatus = <ThrowOnError extends boolean = false>(options: Options<GetAntifraudStatusData, ThrowOnError>) => (options.client ?? client).get<GetAntifraudStatusResponses, unknown, ThrowOnError>({
    security: [{ name: 'VtexIdclientAutCookie', type: 'apiKey' }],
    url: '/transactions/{transactions.id}',
    ...options
});

/**
 * Stop anti-fraud analysis (optional)
 *
 * Notifies whether the order has been canceled by the store or the buyer before completing the anti-fraud analysis status.
 *
 * This endpoint is not mandatory for the antifraud flow to work. Check this [developer guide](https://developers.vtex.com/docs/guides/how-the-integration-protocol-between-vtex-and-antifraud-companies-works) for more details.
 *
 * ## Permissions
 *
 * This endpoint does not require [permissions](https://help.vtex.com/en/tutorial/license-manager-resources--3q6ztrC8YynQf6rdc6euk3).
 */
export const stopAntifraudAnalysisOptional = <ThrowOnError extends boolean = false>(options: Options<StopAntifraudAnalysisOptionalData, ThrowOnError>) => (options.client ?? client).delete<StopAntifraudAnalysisOptionalResponses, unknown, ThrowOnError>({
    security: [{ name: 'VtexIdclientAutCookie', type: 'apiKey' }],
    url: '/transactions/{transactions.Id}',
    ...options
});

/**
 * 1. Retrieve token
 *
 * This endpoint is used to retrieve a payment provider token.
 *
 * ## Permissions
 *
 * This endpoint does not require [permissions](https://help.vtex.com/en/tutorial/license-manager-resources--3q6ztrC8YynQf6rdc6euk3).
 */
export const _1RetrieveToken = <ThrowOnError extends boolean = false>(options: Options<RetrieveTokenData, ThrowOnError>) => (options.client ?? client).post<RetrieveTokenResponses, unknown, ThrowOnError>({
    security: [{ name: 'VtexIdclientAutCookie', type: 'apiKey' }],
    url: '/authorization/token',
    ...options
});

/**
 * 2. Redirect
 *
 * Through this endpoint, VTEX will redirect the store administrator to the Payment provider website using the `token` retrieved in the [previous request](https://developers.vtex.com/docs/api-reference/antifraud-provider-protocol#post-/authorization/token).
 *
 * At this point in the flow, the provider shows the login site to the store admin and authorizes VTEX to use its integration as a valid Payment Provider Processor. After that, your server generates an `authorizationCode`.
 *
 * ## Permissions
 *
 * This endpoint does not require [permissions](https://help.vtex.com/en/tutorial/license-manager-resources--3q6ztrC8YynQf6rdc6euk3).
 */
export const _2Redirect = <ThrowOnError extends boolean = false>(options: Options<RedirectData, ThrowOnError>) => (options.client ?? client).get<RedirectResponses, unknown, ThrowOnError>({
    security: [{ name: 'VtexIdclientAutCookie', type: 'apiKey' }],
    url: '/redirect',
    ...options
});

/**
 * 3. Return to VTEX
 *
 * Through this endpoint, the provider will redirect the store administrator to the VTEX website using the `returnUrl` passed from VTEX to create token.
 *
 * The `returnUrl` must be filled with your query string **authorizationCode**.
 *
 * Example:
 *
 * If you receive the following URL:
 *
 * `https://store.vtex.com/return?authorizationCode=&otherparams...`
 *
 * and your **authorizationCode** is `pro2018`. Then, you redirect the store administrator to: `https://store.vtex.com/return?authorizationCode=pro2018&otherparams...`.
 *
 * ## Permissions
 *
 * This endpoint does not require [permissions](https://help.vtex.com/en/tutorial/license-manager-resources--3q6ztrC8YynQf6rdc6euk3).
 */
export const _3ReturntoVtex = <ThrowOnError extends boolean = false>(options: Options<ReturntoVtexData, ThrowOnError>) => (options.client ?? client).get<ReturntoVtexResponses, unknown, ThrowOnError>({
    security: [{ name: 'VtexIdclientAutCookie', type: 'apiKey' }],
    url: '/authorizationCode',
    ...options
});

/**
 * 4. Get credentials
 *
 * Retrieves merchant credentials.
 *
 * ## Permissions
 *
 * This endpoint does not require [permissions](https://help.vtex.com/en/tutorial/license-manager-resources--3q6ztrC8YynQf6rdc6euk3).
 */
export const _4GetCredentials = <ThrowOnError extends boolean = false>(options: Options<GetCredentialsData, ThrowOnError>) => (options.client ?? client).get<GetCredentialsResponses, unknown, ThrowOnError>({
    security: [{ name: 'VtexIdclientAutCookie', type: 'apiKey' }],
    url: '/authorization/credentials',
    ...options
});
