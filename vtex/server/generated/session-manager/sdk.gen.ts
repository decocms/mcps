// This file is auto-generated by @hey-api/openapi-ts

import type { Client, Options as Options2, TDataShape } from './client';
import { client } from './client.gen';
import type { CreatenewsessionData, CreatenewsessionResponses, EditsessionData, EditsessionResponses, GetSegmentData, GetSegmentResponses, GetSessionData, GetSessionResponses } from './types.gen';

export type Options<TData extends TDataShape = TDataShape, ThrowOnError extends boolean = boolean> = Options2<TData, ThrowOnError> & {
    /**
     * You can provide a client instance returned by `createClient()` instead of
     * individual options. This might be also useful if you want to implement a
     * custom client.
     */
    client?: Client;
    /**
     * You can pass arbitrary values through the `meta` object. This can be
     * used to access values that aren't defined as part of the SDK function.
     */
    meta?: Record<string, unknown>;
};

/**
 * Get session
 *
 * Retrieves information from a previously created sesssion.
 *
 *
 * >⚠️ The Session Manager API uses the `vtex_session` and `vtex_segment` cookies to store the data required to identify the user and the session. These cookies are stored in the user's browser when the session is created and sent automatically in every request to that domain. You will have to reproduce that by sending these cookies as headers to Session Manager API in order for it to work outside of a browser environment.
 *
 * ## Permissions
 *
 * This endpoint does not require [authentication](https://developers.vtex.com/docs/guides/authentication) or [permissions](https://help.vtex.com/en/tutorial/license-manager-resources--3q6ztrC8YynQf6rdc6euk3).
 */
export const getSession = <ThrowOnError extends boolean = false>(options: Options<GetSessionData, ThrowOnError>) => (options.client ?? client).get<GetSessionResponses, unknown, ThrowOnError>({
    security: [{
            in: 'cookie',
            name: 'vtex_session',
            type: 'apiKey'
        }, {
            in: 'cookie',
            name: 'vtex_segment',
            type: 'apiKey'
        }],
    url: '/api/sessions',
    ...options
});

/**
 * Edit session
 *
 * Edits information from a previously created sesssion.
 *
 *
 * This endpoint works the same way as the [Create new session](https://developers.vtex.com/docs/api-reference/session-manager-api#post-/api/sessions) endpoint, but when the request is sent with a `vtex_session` and the `vtex_segment` cookies in the header, it retrieves the session first and then applies the changes instead of generating a new one.
 *
 *
 * Only keys inside the `public` namespace in the request body are considered, and query parameters are automatically added to the public namespace.
 *
 *
 * >⚠️ The Session Manager API uses the `vtex_session` and `vtex_segment` cookies to store the data required to identify the user and the session. These cookies are stored in the user's browser when the session is created and sent automatically in every request to that domain. You will have to reproduce that by sending these cookies as headers to Session Manager API in order for it to work outside of a browser environment.
 *
 * ## Permissions
 *
 * This endpoint does not require [authentication](https://developers.vtex.com/docs/guides/authentication) or [permissions](https://help.vtex.com/en/tutorial/license-manager-resources--3q6ztrC8YynQf6rdc6euk3).
 */
export const editsession = <ThrowOnError extends boolean = false>(options: Options<EditsessionData, ThrowOnError>) => (options.client ?? client).patch<EditsessionResponses, unknown, ThrowOnError>({
    security: [{
            in: 'cookie',
            name: 'vtex_session',
            type: 'apiKey'
        }, {
            in: 'cookie',
            name: 'vtex_segment',
            type: 'apiKey'
        }],
    url: '/api/sessions',
    ...options,
    headers: {
        'Content-Type': 'application/json',
        ...options.headers
    }
});

/**
 * Create new session
 *
 * Creates a new session and returns a session token and a segment token. Also stores `vtex_session` and `vtex_segment` cookies, with the same values returned in the response.
 *
 *
 * All parameters in the body that are not within the public namespace will be ignored. Query string items will automatically be added to the public namespace.
 *
 *
 * >⚠️ The Session Manager API uses the `vtex_session` and `vtex_segment` cookies to store the data required to identify the user and the session. These cookies are stored in the user's browser when the session is created and sent automatically in every request to that domain. You will have to reproduce that by sending these cookies as headers in other requests to Session Manager API in order for it to work outside of a browser environment.
 *
 * ## Permissions
 *
 * This endpoint does not require [authentication](https://developers.vtex.com/docs/guides/authentication) or [permissions](https://help.vtex.com/en/tutorial/license-manager-resources--3q6ztrC8YynQf6rdc6euk3).
 */
export const createnewsession = <ThrowOnError extends boolean = false>(options: Options<CreatenewsessionData, ThrowOnError>) => (options.client ?? client).post<CreatenewsessionResponses, unknown, ThrowOnError>({
    url: '/api/sessions',
    ...options,
    headers: {
        'Content-Type': 'application/json',
        ...options.headers
    }
});

/**
 * Get segment
 *
 * Retrieves information about the segment, which contains additional data related to the session's context.
 *
 *
 * You can add certain public fields as the query string and the system will attempt to fulfill it. Values such as `cultureInfo` and `utm` are overwriteable, just keep in mind such changes will not be reflected in the client's session.
 *
 *
 * If you wish to change the value on the session (and thus be reflected on the segment without special query strings), then use the [Edit session](https://developers.vtex.com/docs/api-reference/session-manager-api#patch-/api/sessions) endpoint.
 *
 * ## Permissions
 *
 * This endpoint does not require [authentication](https://developers.vtex.com/docs/guides/authentication) or [permissions](https://help.vtex.com/en/tutorial/license-manager-resources--3q6ztrC8YynQf6rdc6euk3).
 */
export const getSegment = <ThrowOnError extends boolean = false>(options?: Options<GetSegmentData, ThrowOnError>) => (options?.client ?? client).get<GetSegmentResponses, unknown, ThrowOnError>({
    security: [{
            in: 'cookie',
            name: 'vtex_session',
            type: 'apiKey'
        }, {
            in: 'cookie',
            name: 'vtex_segment',
            type: 'apiKey'
        }],
    url: '/api/segments',
    ...options
});
